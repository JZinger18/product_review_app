<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" media="screen" title="no title">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.3.0/firebaseui.css" />
</head>
<body>

<div id="fb-root"></div>

<script>
	(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.10&appId=1662728243761233";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
	
function checkLoginState() {
  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
  });
}
</script>


<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCTnGzt0VVCeuSob_7vfg86hqRUchvE0P4",
    authDomain: "product-review-62df4.firebaseapp.com",
    databaseURL: "https://product-review-62df4.firebaseio.com",
    projectId: "product-review-62df4",
    storageBucket: "",
    messagingSenderId: "223702307445"
  };
  firebase.initializeApp(config);

// FirebaseUI config.
var uiConfig = {
  signInSuccessUrl: 'index2.html',
  signInOptions: [
    // Leave the lines as is for the providers you want to offer your users.
    firebase.auth.GoogleAuthProvider.PROVIDER_ID,
    firebase.auth.EmailAuthProvider.PROVIDER_ID,
  ],
  // Terms of service url.
  tosUrl: '<your-tos-url>'
};

// Initialize the FirebaseUI Widget using Firebase.
var ui = new firebaseui.auth.AuthUI(firebase.auth());
// The start method will wait until the DOM is loaded.
ui.start('#firebaseui-auth-container', uiConfig);

initApp = function() {
  firebase.auth().onAuthStateChanged(function(user) {
    // console.log(user.val())
    if (user) {
      // User is signed in.

      var displayName = user.displayName;
      var email = user.email;
      var emailVerified = user.emailVerified;
      var photoURL = user.photoURL;
      var uid = user.uid;
      var phoneNumber = user.phoneNumber;
      var providerData = user.providerData;
      console.log(uid)
      console.log(user.displayName)
      // user.getIdToken().then(function(accessToken) {
      //   document.getElementById('sign-in-status').textContent = 'Signed in';
      //   document.getElementById('sign-in').textContent = 'Sign out';
      //   document.getElementById('account-details').textContent = JSON.stringify({
      //     displayName: displayName,
      //     email: email,
      //     emailVerified: emailVerified,
      //     phoneNumber: phoneNumber,
      //     photoURL: photoURL,
      //     uid: uid,
      //     accessToken: accessToken,
      //     providerData: providerData
      //   }, null, '  ');
      // });
     }
    // else {
    //   // User is signed out.
    //   document.getElementById('sign-in-status').textContent = 'Signed out';
    //   document.getElementById('sign-in').textContent = 'Sign in';
    //   document.getElementById('account-details').textContent = 'null';
    // }
  }, function(error) {
    console.log(error);
  });
};

$(document).ready(function() {
    initApp()


})
</script>

<div class="fb-login-button" data-max-rows="1" data-size="medium" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="true">
<fb:login-button 
  scope="public_profile,email"
  onlogin="checkLoginState();">
</fb:login-button>
</div>



<label for="UserId">UserId</label>
<input type="text" id="UserId">
<label for="product">productid</label>
<input type="text" id="productId">
<label for="testform">message</label>
<textarea rows="3" id="testform"></textarea>	
<button type="submit" id="submit" >submit review</button>
<br>
<br>
<br>
<br>
<br>
<label for="username">username</label>
<input type="text" id="username">
<label for="password">password</label>
<input type="text" id="password">
<label for="email">email</label>
<input type="text" id="email">
<button type="submit" id="submit2">make user</button>
<br>
<br>
<br>
<br>
<br>
<label for="name">product name</label>
<input type="text" id="name">
<label for="manufacturer">manufacturer</label>
<input type="text" id="manufacturer">
<label for="UserIdForProduct">UserId</label>
<input type="text" id="UserIdForProduct">
<label for="productDescription">product Description</label>
<textarea rows="3" id="productDescription"></textarea>
<label for="id">id</label>
<input type="text" id="id">	
<button type="submit" id="submit3" >make product</button>
<br><br><br><br>
<label for="name">product name</label>
<input type="text" id="nameOfProductBeingSearched">
<button type="submit" id="submit4" >find products</button>
<br><br><br><br>
<label for="deleteInput">review Id</label>
<input type="text" id="deleteInput">
<button type="submit" id="submit5" >delete review</button>
<br><br><br><br>
<label for="ReviewId">ReviewId</label>
<input type="text" id="ReviewId">
<label for="messageBody">messageBody</label>
<textarea rows="3" id="messageBody"></textarea>	
<button type="submit" id="submit6" >submit review</button>
<br><br>

<label for="channelName">channel Search</label>
<input type="text" id="channelName">	
<button type="submit" id="submit7" >submit channel search</button>


<br><br><br><br>
<label for="nameOfProductBeingSearched2">product name find one</label>
<input type="text" id="nameOfProductBeingSearched2">
<button type="submit" id="submit8" >find products</button>
<br><br><br><br>

<form action="/login" method="post">
    <div>
        <label>Username:</label>
        <input type="text" name="username"/>
    </div>
    <div>
        <label>Password:</label>
        <input type="password" name="password"/>
    </div>
    <div>
        <input type="submit" value="Log In"/>
    </div>
</form>


//firebase ui
<div id="firebaseui-auth-container"></div>


<script>





/*
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '{your-app-id}',
      cookie     : true,
      xfbml      : true,
      version    : '{latest-api-version}'
    });
    FB.AppEvents.logPageView();   
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
});


FB.login()
*/




	
$("#submit").on("click",function(){
	var messageBody = $("#testform").val();
	var UserId = $("#UserId").val();
	var ProductId = $("#productId").val();
	var review = {messageBody,UserId,ProductId};
	console.log("review below");
	console.log(review);
	$.post("/api/reviewpost", review, function(post) {
		console.log(post);
    });
});
$("#submit2").on("click",function(){
	var username = $("#username").val();
	var password = $("#password").val();
	var email = $("#email").val(); 
	var user = {username,password,email};
	$.post("/api/userpost", user, function(post) {
		console.log(post);
    });
});
$("#submit3").on("click",function(){
	var name = $("#name").val();
	var manufacturer = $("#manufacturer").val();
	var UserId = $("#UserIdForProduct").val();
	var productDescription = $("#productDescription").val();
	var product = {name,manufacturer,UserId,productDescription};
	$.post("/api/productpost", product, function(post) {
		console.log(post);
    });
});

$("#submit4").on("click",function(){
	var limit = 12//someFunction that determines the limit;
	var name = $("#nameOfProductBeingSearched").val();
	name += "?"+limit;
	$.get("/api/getAllProducts/"+name, function(products) {
		console.log(products);
    });
});

$("#submit5").on("click",function(){
	var id = $("#deleteInput").val();
	$("#deleteInput").val('');
	$.ajax({
      method: "DELETE",
      url: "/api/Reviews/"+id
    })
    .done(function(products) 
	{
		console.log(products);
    });
});

$("#submit6").on("click",function(){
	var messageBody = $("#messageBody").val();
	var id = $("#ReviewId").val();
	var review = {messageBody,id};
	$.ajax({
      method: "PUT",
      url: "/api/Reviewupdate",
      data: review
    })
    .done(function(post) {
		console.log(post);
    });
});

$("#submit7").on("click",function(){
	var channelName = $("#channelName").val();
	$.get("/api/channelsearch/"+channelName, function(channels) {
		console.log(channels);
    });
});

$("#submit8").on("click",function(){
  var name = $("#nameOfProductBeingSearched2").val();
  $.get("/api/getOneProduct/"+name, function(products) {
    console.log(products);
    });
});


/*    $.ajax({
      method: "PUT",
      url: "/api/posts",
      data: post
    })
    .done(function() {
      window.location.href = "/blog";
    });*/

/*
  function deletePost(id) {
    $.ajax({
      method: "DELETE",
      url: "/api/posts/" + id
    })
    .done(function() {
      getPosts(postCategorySelect.val());
    });
  }*/

</script>
</body>
</html>